# LINE DEVIO BEACON

<p align="center" width="100%">
    <img  src="../assets/beacon/1.webp"> 
</p>

This project outlines how to integrate and utilize the **LINE DEVIO BEACON** to enhance location-based customer engagement using LINE Official Account (LINE OA).

# DEVIO Beacon Integration (Works with LINE Beacon)

DEVIO Beacon ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå Bluetooth Low Energy (BLE) ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö LINE Beacon ‡∏ã‡∏∂‡πà‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö LINE Official Account (LINE OA) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏ñ‡∏∂‡∏á‡∏™‡∏°‡∏≤‡∏£‡πå‡∏ó‡πÇ‡∏ü‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô LINE ‡πÅ‡∏•‡∏∞‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö Bot ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡πÑ‡∏£‡πâ‡∏£‡∏≠‡∏¢‡∏ï‡πà‡∏≠

## üîß ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á DEVIO Beacon

- ‡πÉ‡∏ä‡πâ‡∏ä‡∏¥‡∏õ Nordic nRF52840 ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á
- ‡πÉ‡∏ä‡πâ Bluetooth 5.2 ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà CR-2450 ‡πÄ‡∏û‡∏µ‡∏¢‡∏á 3 ‡∏Å‡πâ‡∏≠‡∏ô ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ñ‡∏∂‡∏á 18 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏£‡∏≠‡∏ö‡∏ó‡∏¥‡∏®‡πÉ‡∏ô‡∏£‡∏±‡∏®‡∏°‡∏µ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 25 ‡πÄ‡∏°‡∏ï‡∏£
- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö LINE OA ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö Webhook event ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
- ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏á‡πà‡∏≤‡∏¢ ‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏∞‡∏ó‡∏±‡∏î‡∏£‡∏±‡∏î (4.98 x 12.9 x 2.93 ‡∏ã‡∏°.)

---

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡∏ú‡∏π‡∏Å DEVIO Beacon ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö LINE Official Account

1. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà [LINE Beacon Manager](https://manager.line.biz/beacon/register)
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å LINE OA ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
3. ‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™ `HWID` (10 ‡∏´‡∏•‡∏±‡∏Å) ‡πÅ‡∏•‡∏∞ `Passcode` (12 ‡∏´‡∏•‡∏±‡∏Å) ‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå
4. ‡∏´‡∏≤‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏à‡∏∞‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ‚ÄúLink successful!‚Äù

> ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:  
> - 1 LINE OA ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ú‡∏π‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢ Beacon  
> - 1 Beacon ‡∏à‡∏∞‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà LINE OA ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡πâ‡∏≤‡∏¢‡∏ï‡πâ‡∏≠‡∏á Unlink ‡∏Å‡πà‡∏≠‡∏ô

---

## ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Webhook event
```json
{
  "destination": "Uxxxxxxxxxxxxxxx",
  "events": [
    {
      "type": "beacon",
      "timestamp": 1611123456789,
      "source": {
        "type": "user",
        "userId": "U4af4980629..."
      },
      "beacon": {
        "hwid": "abc1234567",
        "type": "enter"
      },
      "replyToken": "nHuyWiB7yP5Zw52FIkcQA"
    }
  ]
}

```
‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÉ‡∏ô Event:
- type: "beacon" ‚Äî ‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô Beacon Even
- beacon.hwid ‚Äî ‡∏£‡∏´‡∏±‡∏™‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á Beacon ‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡πâ‡∏ô
- beacon.type ‚Äî ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á Event ‡πÄ‡∏ä‡πà‡∏ô "enter", "banner", "stay
- replyToken ‚Äî ‡πÉ‡∏ä‡πâ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±
- source.userId ‚Äî LINE User ID ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Beacon

---
##  ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î
```typescript
import express from 'express';
import { Client, middleware, WebhookEvent } from '@line/bot-sdk';

const config = {
  channelAccessToken: process.env.LINE_CHANNEL_ACCESS_TOKEN!,
  channelSecret: process.env.LINE_CHANNEL_SECRET!,
};

const client = new Client(config);
const app = express();

app.post('/webhook', middleware(config), async (req, res) => {
  const events: WebhookEvent[] = req.body.events;

  await Promise.all(events.map(handleEvent));
  res.sendStatus(200);
});

async function handleEvent(event: WebhookEvent): Promise<void> {
  if (event.type !== 'beacon' || !event.replyToken) {
    return;
  }

  const beaconEvent = event as any;

  const userId = beaconEvent.source.userId;
  const hwid = beaconEvent.beacon.hwid;
  const beaconType = beaconEvent.beacon.type;

  if (beaconType === 'enter') {
    await client.replyMessage(event.replyToken, {
      type: 'text',
      text: `üì° Welcome! You just entered the beacon zone (${hwid}).`,
    });
  }
}

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`LINE Beacon bot is running on port ${PORT}`);
});

```


## Use Case ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥

- ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡πà‡∏á‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô
- ‡πÄ‡∏ä‡πá‡∏Å‡∏≠‡∏¥‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ß‡∏¥‡πà‡∏á/Walk Rally ‡∏î‡πâ‡∏ß‡∏¢ Beacon
- ‡∏ô‡∏¥‡∏ó‡∏£‡∏£‡∏®‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏®‡∏¥‡∏•‡∏õ‡∏∞‡∏ú‡πà‡∏≤‡∏ô LINE
- ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö stamp ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏π‡πâ

- ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ LINE OA ‡πÅ‡∏ö‡∏ö **Verified** ‡∏´‡∏£‡∏∑‡∏≠ **Premium** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ `banner` event
- ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ `stay` event ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô LINE Certified Provider
- DEVIO Beacon ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡πÉ‡∏ô foreground ‡πÅ‡∏•‡∏∞ background mode

---